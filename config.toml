# 基本设置
instance_name = "${INSTANCE_NAME}"
machine_id = "${MACHINE_ID}"
ipv4 = "${IPV4}"
dhcp = ${DHCP}
hostname = "${HOSTNAME}"

# 监听端口配置
listeners = [
    "tcp://0.0.0.0:19001",
    "udp://0.0.0.0:19001",
    "udp://[::]:19001",
    "tcp://[::]:19001",
    "wss://0.0.0.0:19002/",
    "wss://[::]:19002/",
]

# RPC 管理接口
rpc_portal = "${RPC_PORTAL}"

# 网络标识
network_name = "${NETWORK_NAME}"
network_secret = "${NETWORK_SECRET}"

# 对等节点配置（从文件加载或环境变量生成）
{{ if fileExists "/app/peers.toml" }}
# 从外部文件加载 peer 配置
{{ else }}
# 默认 peer 配置（可以通过环境变量添加）
[[peer]]
uri = "tcp://gd.et.tianpao.top:11010"

[[peer]]
uri = "tcp://gz.server.piedaochuan.top:11010"
{{ end }}

# 高级设置
default_protocol = "${DEFAULT_PROTOCOL}"
dev_name = ""
disable_encryption = false
disable_ipv6 = false
mtu = ${MTU}
latency_first = true
enable_exit_node = ${ENABLE_EXIT_NODE}
no_tun = false
use_smoltcp = false
relay_network_whitelist = ["*"]
disable_p2p = ${DISABLE_P2P}
relay_all_peer_rpc = false
config_server = "${CONFIG_SERVER}"
